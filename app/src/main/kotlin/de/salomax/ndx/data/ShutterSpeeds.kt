package de.salomax.ndx.data

import android.text.Spannable
import android.text.SpannableString
import android.text.Spanned
import android.text.SpannedString
import android.text.style.RelativeSizeSpan
import de.salomax.ndx.util.SuperScriptSpan

/**
 * Shutter speeds are in microseconds to avoid dealing with floating points
 */
enum class ShutterSpeeds(val doubleValues: LongArray, val htmlValues: Array<Spanned>) {

    FULL(
            longArrayOf(
                    1_000_000L * 30,
                    1_000_000L * 15,
                    1_000_000L * 8,
                    1_000_000L * 4,
                    1_000_000L * 2,
                    1_000_000L * 1,
                    1_000_000L / 2,
                    1_000_000L / 4,
                    1_000_000L / 8,
                    1_000_000L / 15,
                    1_000_000L / 30,
                    1_000_000L / 60,
                    1_000_000L / 125,
                    1_000_000L / 250,
                    1_000_000L / 500,
                    1_000_000L / 1_000,
                    1_000_000L / 2_000,
                    1_000_000L / 4_000,
                    1_000_000L / 8_000),
            arrayOf(
                    SpannedString("30"),
                    SpannedString("15"),
                    SpannedString("8"),
                    SpannedString("4"),
                    SpannedString("2"),
                    SpannedString("1"),
                    getFraction(2),
                    getFraction(4),
                    getFraction(8),
                    getFraction(15),
                    getFraction(30),
                    getFraction(60),
                    getFraction(125),
                    getFraction(250),
                    getFraction(500),
                    getFraction(1000),
                    getFraction(2000),
                    getFraction(4000),
                    getFraction(8000))
    ),

    HALF(
            longArrayOf(
                    1_000_000L * 30,
                    1_000_000L * 20,
                    1_000_000L * 15,
                    1_000_000L * 10,
                    1_000_000L * 8,
                    1_000_000L * 6,
                    1_000_000L * 4,
                    1_000_000L * 3,
                    1_000_000L * 2,
                    (1_000_000L * 1.5).toLong(),
                    1_000_000L * 1,
                    (1_000_000L / 1.5).toLong(),
                    1_000_000L / 2,
                    1_000_000L / 3,
                    1_000_000L / 4,
                    1_000_000L / 6,
                    1_000_000L / 8,
                    1_000_000L / 10,
                    1_000_000L / 15,
                    1_000_000L / 20,
                    1_000_000L / 30,
                    1_000_000L / 45,
                    1_000_000L / 60,
                    1_000_000L / 90,
                    1_000_000L / 125,
                    1_000_000L / 180,
                    1_000_000L / 250,
                    1_000_000L / 350,
                    1_000_000L / 500,
                    1_000_000L / 750,
                    1_000_000L / 1_000,
                    1_000_000L / 1_500,
                    1_000_000L / 2_000,
                    1_000_000L / 3_000,
                    1_000_000L / 4_000,
                    1_000_000L / 6_000,
                    1_000_000L / 8_000),
            arrayOf(
                    SpannedString("30"),
                    SpannedString("20"),
                    SpannedString("15"),
                    SpannedString("10"),
                    SpannedString("8"),
                    SpannedString("6"),
                    SpannedString("4"),
                    SpannedString("3"),
                    SpannedString("2"),
                    SpannedString("1.5"),
                    SpannedString("1"),
                    getFraction(1.5),
                    getFraction(2),
                    getFraction(3),
                    getFraction(4),
                    getFraction(6),
                    getFraction(8),
                    getFraction(10),
                    getFraction(15),
                    getFraction(20),
                    getFraction(30),
                    getFraction(45),
                    getFraction(60),
                    getFraction(90),
                    getFraction(125),
                    getFraction(180),
                    getFraction(250),
                    getFraction(350),
                    getFraction(500),
                    getFraction(750),
                    getFraction(1000),
                    getFraction(1500),
                    getFraction(2000),
                    getFraction(3000),
                    getFraction(4000),
                    getFraction(6000),
                    getFraction(8000))
    ),

    THIRD(
            longArrayOf(
                    1_000_000L * 30,
                    1_000_000L * 25,
                    1_000_000L * 20,
                    1_000_000L * 15,
                    1_000_000L * 13,
                    1_000_000L * 10,
                    1_000_000L * 8,
                    1_000_000L * 6,
                    1_000_000L * 5,
                    1_000_000L * 4,
                    1_000_000L * 3,
                    (1_000_000L * 2.5).toLong(),
                    1_000_000L * 2,
                    (1_000_000L * 1.6).toLong(),
                    (1_000_000L * 1.3).toLong(),
                    1_000_000L * 1,
                    (1_000_000L / 1.3).toLong(),
                    (1_000_000L / 1.6).toLong(),
                    1_000_000L / 2,
                    (1_000_000L / 2.5).toLong(),
                    1_000_000L / 3,
                    1_000_000L / 4,
                    1_000_000L / 5,
                    1_000_000L / 6,
                    1_000_000L / 8,
                    1_000_000L / 10,
                    1_000_000L / 13,
                    1_000_000L / 15,
                    1_000_000L / 20,
                    1_000_000L / 25,
                    1_000_000L / 30,
                    1_000_000L / 40,
                    1_000_000L / 50,
                    1_000_000L / 60,
                    1_000_000L / 80,
                    1_000_000L / 100,
                    1_000_000L / 125,
                    1_000_000L / 160,
                    1_000_000L / 200,
                    1_000_000L / 250,
                    1_000_000L / 320,
                    1_000_000L / 400,
                    1_000_000L / 500,
                    1_000_000L / 640,
                    1_000_000L / 800,
                    1_000_000L / 1_000,
                    1_000_000L / 1_250,
                    1_000_000L / 1_600,
                    1_000_000L / 2_000,
                    1_000_000L / 2_500,
                    1_000_000L / 3_200,
                    1_000_000L / 4_000,
                    1_000_000L / 5_000,
                    1_000_000L / 6_400,
                    1_000_000L / 8_000),
            arrayOf(
                    SpannedString("30"),
                    SpannedString("25"),
                    SpannedString("20"),
                    SpannedString("15"),
                    SpannedString("13"),
                    SpannedString("10"),
                    SpannedString("8"),
                    SpannedString("6"),
                    SpannedString("5"),
                    SpannedString("4"),
                    SpannedString("3"),
                    SpannedString("2.5"),
                    SpannedString("2"),
                    SpannedString("1.6"),
                    SpannedString("1.3"),
                    SpannedString("1"),
                    getFraction(1.3),
                    getFraction(1.6),
                    getFraction(2),
                    getFraction(2.5),
                    getFraction(3),
                    getFraction(4),
                    getFraction(5),
                    getFraction(6),
                    getFraction(8),
                    getFraction(10),
                    getFraction(13),
                    getFraction(15),
                    getFraction(20),
                    getFraction(25),
                    getFraction(30),
                    getFraction(40),
                    getFraction(50),
                    getFraction(60),
                    getFraction(80),
                    getFraction(100),
                    getFraction(125),
                    getFraction(160),
                    getFraction(200),
                    getFraction(250),
                    getFraction(320),
                    getFraction(400),
                    getFraction(500),
                    getFraction(640),
                    getFraction(800),
                    getFraction(1000),
                    getFraction(1250),
                    getFraction(1600),
                    getFraction(2000),
                    getFraction(2500),
                    getFraction(3200),
                    getFraction(4000),
                    getFraction(5000),
                    getFraction(6400),
                    getFraction(8000))
    )

}

private fun getFraction(x: Number): Spannable {
    val string = SpannableString("1âˆ•" + x.toString())
    string.setSpan(SuperScriptSpan(2), 0, 1, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)
    string.setSpan(SuperScriptSpan(3), 1, 2, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)
    string.setSpan(RelativeSizeSpan(.85f), 2, x.toString().length + 2, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE)
    return string
}